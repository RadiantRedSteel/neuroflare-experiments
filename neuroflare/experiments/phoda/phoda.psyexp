<?xml version="1.0" ?>
<PsychoPy2experiment encoding="utf-8" version="2025.2.3">
  <Settings>
    <Param val="ptb" valType="str" updates="None" name="Audio lib"/>
    <Param val="" valType="str" updates="None" name="Completed URL"/>
    <Param val="auto" valType="str" updates="None" name="Data file delimiter"/>
    <Param val="u'data/%s_%s_%s' % (expInfo['participant'], expName, expInfo['date'])" valType="code" updates="None" name="Data filename"/>
    <Param val="True" valType="bool" updates="None" name="Enable Escape"/>
    <Param val="Thank you for your patience." valType="str" updates="None" name="End Message"/>
    <Param val="{'participant': 'f&quot;{randint(0, 999999):06.0f}&quot;', 'session': '001'}" valType="code" updates="None" name="Experiment info"/>
    <Param val="True" valType="bool" updates="None" name="Force stereo"/>
    <Param val="True" valType="bool" updates="None" name="Full-screen window"/>
    <Param val="" valType="str" updates="None" name="HTML path"/>
    <Param val="" valType="str" updates="None" name="Incomplete URL"/>
    <Param val="testMonitor" valType="str" updates="None" name="Monitor"/>
    <Param val="[]" valType="list" updates="None" name="Resources"/>
    <Param val="False" valType="bool" updates="None" name="Save csv file"/>
    <Param val="True" valType="bool" updates="None" name="Save excel file"/>
    <Param val="False" valType="bool" updates="None" name="Save hdf5 file"/>
    <Param val="True" valType="bool" updates="None" name="Save log file"/>
    <Param val="True" valType="bool" updates="None" name="Save psydat file"/>
    <Param val="True" valType="bool" updates="None" name="Save wide csv file"/>
    <Param val="1" valType="num" updates="None" name="Screen"/>
    <Param val="True" valType="bool" updates="None" name="Show info dlg"/>
    <Param val="True" valType="bool" updates="None" name="Show mouse"/>
    <Param val="height" valType="str" updates="None" name="Units"/>
    <Param val="" valType="str" updates="None" name="Use version"/>
    <Param val="[2560, 1440]" valType="list" updates="None" name="Window size (pixels)"/>
    <Param val="none" valType="str" updates="None" name="backgroundFit"/>
    <Param val="" valType="str" updates="None" name="backgroundImg"/>
    <Param val="avg" valType="str" updates="None" name="blendMode"/>
    <Param val="float" valType="str" updates="None" name="clockFormat"/>
    <Param val="{'thisRow.t': 'priority.CRITICAL', 'expName': 'priority.LOW'}" valType="dict" updates="None" name="colPriority"/>
    <Param val="$(-0.5000, -0.5000, -0.5000)" valType="color" updates="None" name="color"/>
    <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
    <Param val="warning" valType="code" updates="None" name="consoleLoggingLevel"/>
    <Param val="default" valType="str" updates="None" name="ecSampleRate"/>
    <Param val="100.1.1.1" valType="str" updates="None" name="elAddress"/>
    <Param val="FILTER_LEVEL_2" valType="str" updates="None" name="elDataFiltering"/>
    <Param val="FILTER_LEVEL_OFF" valType="str" updates="None" name="elLiveFiltering"/>
    <Param val="EYELINK 1000 DESKTOP" valType="str" updates="None" name="elModel"/>
    <Param val="ELLIPSE_FIT" valType="str" updates="None" name="elPupilAlgorithm"/>
    <Param val="PUPIL_AREA" valType="str" updates="None" name="elPupilMeasure"/>
    <Param val="1000" valType="num" updates="None" name="elSampleRate"/>
    <Param val="False" valType="bool" updates="None" name="elSimMode"/>
    <Param val="RIGHT_EYE" valType="str" updates="None" name="elTrackEyes"/>
    <Param val="PUPIL_CR_TRACKING" valType="str" updates="None" name="elTrackingMode"/>
    <Param val="phoda" valType="str" updates="None" name="expName"/>
    <Param val="0.5" valType="str" updates="None" name="expVersion"/>
    <Param val="on Sync" valType="str" updates="None" name="exportHTML"/>
    <Param val="None" valType="str" updates="None" name="eyetracker"/>
    <Param val="" valType="code" updates="None" name="frameRate"/>
    <Param val="Attempting to measure frame rate of screen, please wait..." valType="str" updates="None" name="frameRateMsg"/>
    <Param val="127.0.0.1" valType="str" updates="None" name="gpAddress"/>
    <Param val="4242" valType="num" updates="None" name="gpPort"/>
    <Param val="ioHub" valType="str" updates="None" name="keyboardBackend"/>
    <Param val="debug" valType="code" updates="None" name="logging level"/>
    <Param val="True" valType="bool" updates="None" name="measureFrameRate"/>
    <Param val="['MIDDLE_BUTTON']" valType="list" updates="None" name="mgBlink"/>
    <Param val="CONTINUOUS" valType="str" updates="None" name="mgMove"/>
    <Param val="0.5" valType="num" updates="None" name="mgSaccade"/>
    <Param val="neon.local" valType="str" updates="None" name="plCompanionAddress"/>
    <Param val="8080" valType="num" updates="None" name="plCompanionPort"/>
    <Param val="0.6" valType="num" updates="None" name="plConfidenceThreshold"/>
    <Param val="" valType="str" updates="None" name="plPupilCaptureRecordingLocation"/>
    <Param val="127.0.0.1" valType="str" updates="None" name="plPupilRemoteAddress"/>
    <Param val="50020" valType="num" updates="None" name="plPupilRemotePort"/>
    <Param val="1000" valType="num" updates="None" name="plPupilRemoteTimeoutMs"/>
    <Param val="False" valType="bool" updates="None" name="plPupillometryOnly"/>
    <Param val="psychopy_iohub_surface" valType="str" updates="None" name="plSurfaceName"/>
    <Param val="0" valType="code" updates="None" name="runMode"/>
    <Param val="False" valType="bool" updates="None" name="rush"/>
    <Param val="time" valType="str" updates="None" name="sortColumns"/>
    <Param val="" valType="str" updates="None" name="tbLicenseFile"/>
    <Param val="" valType="str" updates="None" name="tbModel"/>
    <Param val="60" valType="num" updates="None" name="tbSampleRate"/>
    <Param val="" valType="str" updates="None" name="tbSerialNo"/>
    <Param val="pyglet" valType="str" updates="None" name="winBackend"/>
  </Settings>
  <Routines>
    <Routine name="experimentSetup">
      <RoutineSettingsComponent name="experimentSetup" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="This routine contains all Before Experiment and Begin Experiment code components used across the entire study.&amp;#10;It centralizes global variables, screen geometry, scaling logic, and shared helper functions so that all other routines operate within a consistent coordinate system and configuration.&amp;#10;&amp;#10;Because these variables are referenced throughout the experiment, changes should be made cautiously and with awareness of downstream effects.&amp;#10;This routine must appear before any trial‑based routines in the experiment flow." valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="experimentSetup" valType="code" updates="None" name="name"/>
        <Param val="False" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_experiment_setup" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="# ------------------------------------------------------------&amp;#10;# code_experiment_setup&amp;#10;# Global screen geometry and shared layout variables.&amp;#10;#&amp;#10;# Computes window aspect ratio and establishes a unified&amp;#10;# coordinate system in 'height' units so all routines scale&amp;#10;# consistently across monitors.&amp;#10;#&amp;#10;# Also defines shared wrap-width values for text components.&amp;#10;# Also includes imports for later components&amp;#10;# ------------------------------------------------------------&amp;#10;&amp;#10;import random # for t_blank_delayer&amp;#10;&amp;#10;# ============================================================&amp;#10;# =============== GLOBAL SCREEN GEOMETRY =====================&amp;#10;# ============================================================&amp;#10;# Centralized screen geometry so all routines share the same coordinate system&amp;#10;&amp;#10;screen_width, screen_height = win.size&amp;#10;aspect = screen_width / screen_height  # width / height&amp;#10;&amp;#10;# In 'height' units:&amp;#10;# - Full screen height = 1.0&amp;#10;# - Full screen width  = aspect&amp;#10;leftEdge = -aspect / 2&amp;#10;rightEdge = aspect / 2&amp;#10;topEdge = 0.5&amp;#10;bottomEdge = -0.5&amp;#10;&amp;#10;# Wrap width as a percentage of screen width&amp;#10;aspect80 = aspect * 0.80 # 80% of screen width&amp;#10;aspect20 = aspect * 0.20  # 20% of screen width&amp;#10;comp_wrap_width_body = aspect80&amp;#10;comp_wrap_width_header = aspect80&amp;#10;comp_wrap_width_continue = aspect80 &amp;#10;" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="[screen_width, screen_height] = psychoJS.window.size;&amp;#10;aspect = (screen_width / screen_height);&amp;#10;leftEdge = ((- aspect) / 2);&amp;#10;rightEdge = (aspect / 2);&amp;#10;topEdge = 0.5;&amp;#10;bottomEdge = (- 0.5);&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_experiment_setup" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <CodeComponent name="code_state_measure_setup" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="# ------------------------------------------------------------&amp;#10;# code_state_measure_setup&amp;#10;# Global setup logic for the stateMeasure routine.&amp;#10;#&amp;#10;# Handles scaling rules, slider configuration helpers, and&amp;#10;# shared variables needed to dynamically construct rating&amp;#10;# scales based on loop parameters.&amp;#10;#&amp;#10;# The stateMeasure routine depends on this setup code to&amp;#10;# size components correctly and interpret SAM/text settings.&amp;#10;# ------------------------------------------------------------&amp;#10;&amp;#10;# --- Helper functions for dynamic slider configuration ---&amp;#10;def parse_tick_values(raw):&amp;#10;    # If PsychoPy already parsed it into a list, just return it&amp;#10;    if isinstance(raw, list):&amp;#10;        return raw&amp;#10;    # Otherwise assume it's a comma-separated string&amp;#10;    return [int(x.strip()) for x in raw.split(',')]&amp;#10;&amp;#10;# ===============================================================&amp;#10;# ============== STATE-MEASURE SPECIFIC GEOMETRY ================&amp;#10;# ===============================================================&amp;#10;&amp;#10;def sm_compute_tick_positions(tick_values, rating_type):&amp;#10;    &quot;&quot;&quot;&amp;#10;    Compute slider size, slider position, and min/max label positions&amp;#10;    for both SAM and Generic rating types.&amp;#10;    &quot;&quot;&quot;&amp;#10;&amp;#10;    if rating_type == &quot;SAM&quot;:&amp;#10;        # SAM uses the precomputed geometry&amp;#10;        slider_size = (sm_sam_comp_slider_width, sm_sam_comp_slider_size_height)&amp;#10;        slider_pos  = (0, sm_sam_comp_slider_pos_y)&amp;#10;&amp;#10;        # Tick positions already computed globally&amp;#10;        tick_positions = sm_sam_tick_positions&amp;#10;&amp;#10;        label_min_pos = (tick_positions[0],  sm_sam_comp_label_pos_y)&amp;#10;        label_max_pos = (tick_positions[-1], sm_sam_comp_label_pos_y)&amp;#10;&amp;#10;    else:&amp;#10;        # Generic slider: evenly spaced ticks across the slider width&amp;#10;        slider_size = (sm_gen_comp_slider_size_width, sm_gen_comp_slider_size_height)&amp;#10;        slider_pos  = (0, sm_gen_comp_slider_pos_y)&amp;#10;&amp;#10;        # Compute generic tick positions dynamically&amp;#10;        num_ticks = len(tick_values)&amp;#10;        half_width = sm_gen_comp_slider_size_width / 2&amp;#10;&amp;#10;        # Even spacing across the width&amp;#10;        tick_positions = [&amp;#10;            -half_width + (i / (num_ticks - 1)) * sm_gen_comp_slider_size_width&amp;#10;            for i in range(num_ticks)&amp;#10;        ]&amp;#10;&amp;#10;        # Labels sit below the slider&amp;#10;        label_min_pos = (tick_positions[0],  sm_gen_comp_label_pos_y)&amp;#10;        label_max_pos = (tick_positions[-1], sm_gen_comp_label_pos_y)&amp;#10;&amp;#10;    return {&amp;#10;        &quot;slider_size&quot;: slider_size,&amp;#10;        &quot;slider_pos&quot;: slider_pos,&amp;#10;        &quot;tick_positions&quot;: tick_positions,&amp;#10;        &quot;label_min_pos&quot;: label_min_pos,&amp;#10;        &quot;label_max_pos&quot;: label_max_pos&amp;#10;    }&amp;#10;&amp;#10;# ===============================================================&amp;#10;# =================== GEN SPECIFIC GEOMETRY =====================&amp;#10;# ===============================================================&amp;#10;&amp;#10;# --- Generic Slider Scaling ---&amp;#10;# Full-width slider across screen&amp;#10;# Generic slider (used when rating_type != &quot;SAM&quot;)&amp;#10;&amp;#10;# Slider layout (height units)&amp;#10;sm_gen_comp_slider_size_width  = aspect * 0.6  # 60% of screen width&amp;#10;sm_gen_comp_slider_size_height = 0.1           # slider thickness/height&amp;#10;sm_gen_comp_slider_pos_y       = 0             # vertical position of the slider center&amp;#10;&amp;#10;# Label Min/Max layout&amp;#10;sm_gen_comp_label_pos_y = sm_gen_comp_slider_pos_y - 0.2&amp;#10;&amp;#10;# ===============================================================&amp;#10;# =================== SAM SPECIFIC GEOMETRY =====================&amp;#10;# ===============================================================&amp;#10;&amp;#10;# --- SAM image geometry (pixels) ---&amp;#10;sm_sam_img_px_width  = 1168&amp;#10;sm_sam_img_px_height = 231&amp;#10;sm_sam_img_aspect    = sm_sam_img_px_width / sm_sam_img_px_height  # ≈ 5.056&amp;#10;&amp;#10;# Pictogram/gap geometry (pixels)&amp;#10;# Note: there are 5 pictograms and 4 gaps spanning the full image width&amp;#10;sm_sam_pictogram_px_width     = 215&amp;#10;sm_sam_pictogram_gap_px_width = 23&amp;#10;&amp;#10;# --- Layout decisions (height units) ---&amp;#10;sm_sam_comp_img_size_height = 0.25                                             # 25% of screen height&amp;#10;sm_sam_comp_img_size_width  = sm_sam_comp_img_size_height * sm_sam_img_aspect  # scaled width based on aspect&amp;#10;sm_sam_comp_img_pos_y       = 0.1                                              # vertical position of the image&amp;#10;&amp;#10;# Message Layout&amp;#10;sm_sam_comp_message_pos_y = sm_sam_comp_img_pos_y + 0.2&amp;#10;&amp;#10;# Slider layout (height units)&amp;#10;sm_sam_comp_slider_pos_y       = -0.09      # vertical position of the slider center&amp;#10;sm_sam_comp_slider_size_height = 0.06       # slider thickness/height&amp;#10;sm_sam_slider_px_width    = sm_sam_img_px_width - 215&amp;#10;sm_sam_comp_slider_width  = sm_sam_comp_img_size_width * (sm_sam_slider_px_width / sm_sam_img_px_width)&amp;#10;&amp;#10;# Scale factor: px -&gt; 'height' units within the image width&amp;#10;sm_sam_scale_factor = sm_sam_comp_img_size_width / sm_sam_img_px_width&amp;#10;&amp;#10;sm_sam_pictogram_w  = sm_sam_pictogram_px_width * sm_sam_scale_factor&amp;#10;sm_sam_gap_w        = sm_sam_pictogram_gap_px_width * sm_sam_scale_factor&amp;#10;&amp;#10;# --- Compute 9 tick x-positions aligned to pictograms ---&amp;#10;sm_sam_tick_positions = []&amp;#10;sm_sam_tick_x = -sm_sam_comp_img_size_width / 2 + sm_sam_pictogram_w / 2&amp;#10;&amp;#10;for i in range(9):&amp;#10;    sm_sam_tick_positions.append(sm_sam_tick_x)&amp;#10;    if i % 2 == 0:&amp;#10;        sm_sam_tick_x += sm_sam_pictogram_w / 2 + sm_sam_gap_w / 2&amp;#10;    else:&amp;#10;        sm_sam_tick_x += sm_sam_gap_w / 2 + sm_sam_pictogram_w / 2&amp;#10;&amp;#10;# Label Min/Max layout&amp;#10;sm_sam_comp_label_pos_y = sm_sam_comp_slider_pos_y - 0.15" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="function parse_tick_values(raw) {&amp;#10;    if ((raw instanceof list)) {&amp;#10;        return raw;&amp;#10;    }&amp;#10;    return function () {&amp;#10;    var _pj_a = [], _pj_b = raw.split(&quot;,&quot;);&amp;#10;    for (var _pj_c = 0, _pj_d = _pj_b.length; (_pj_c &lt; _pj_d); _pj_c += 1) {&amp;#10;        var x = _pj_b[_pj_c];&amp;#10;        _pj_a.push(Number.parseInt(x.strip()));&amp;#10;    }&amp;#10;    return _pj_a;&amp;#10;}&amp;#10;.call(this);&amp;#10;}&amp;#10;function sm_compute_tick_positions(tick_values, rating_type) {&amp;#10;    /*&amp;#10;    Compute slider size, slider position, and min/max label positions&amp;#10;    for both SAM and Generic rating types.&amp;#10;    */&amp;#10;    var half_width, label_max_pos, label_min_pos, num_ticks, slider_pos, slider_size, tick_positions;&amp;#10;    if ((rating_type === &quot;SAM&quot;)) {&amp;#10;        slider_size = [sm_sam_comp_slider_width, sm_sam_comp_slider_size_height];&amp;#10;        slider_pos = [0, sm_sam_comp_slider_pos_y];&amp;#10;        tick_positions = sm_sam_tick_positions;&amp;#10;        label_min_pos = [tick_positions[0], sm_sam_comp_label_pos_y];&amp;#10;        label_max_pos = [tick_positions.slice((- 1))[0], sm_sam_comp_label_pos_y];&amp;#10;    } else {&amp;#10;        slider_size = [sm_gen_comp_slider_size_width, sm_gen_comp_slider_size_height];&amp;#10;        slider_pos = [0, sm_gen_comp_slider_pos_y];&amp;#10;        num_ticks = tick_values.length;&amp;#10;        half_width = (sm_gen_comp_slider_size_width / 2);&amp;#10;        tick_positions = function () {&amp;#10;    var _pj_a = [], _pj_b = util.range(num_ticks);&amp;#10;    for (var _pj_c = 0, _pj_d = _pj_b.length; (_pj_c &lt; _pj_d); _pj_c += 1) {&amp;#10;        var i = _pj_b[_pj_c];&amp;#10;        _pj_a.push(((- half_width) + ((i / (num_ticks - 1)) * sm_gen_comp_slider_size_width)));&amp;#10;    }&amp;#10;    return _pj_a;&amp;#10;}&amp;#10;.call(this);&amp;#10;        label_min_pos = [tick_positions[0], sm_gen_comp_label_pos_y];&amp;#10;        label_max_pos = [tick_positions.slice((- 1))[0], sm_gen_comp_label_pos_y];&amp;#10;    }&amp;#10;    return {&quot;slider_size&quot;: slider_size, &quot;slider_pos&quot;: slider_pos, &quot;tick_positions&quot;: tick_positions, &quot;label_min_pos&quot;: label_min_pos, &quot;label_max_pos&quot;: label_max_pos};&amp;#10;}&amp;#10;sm_gen_comp_slider_size_width = (aspect * 0.6);&amp;#10;sm_gen_comp_slider_size_height = 0.1;&amp;#10;sm_gen_comp_slider_pos_y = 0;&amp;#10;sm_gen_comp_label_pos_y = (sm_gen_comp_slider_pos_y - 0.2);&amp;#10;sm_sam_img_px_width = 1168;&amp;#10;sm_sam_img_px_height = 231;&amp;#10;sm_sam_img_aspect = (sm_sam_img_px_width / sm_sam_img_px_height);&amp;#10;sm_sam_pictogram_px_width = 215;&amp;#10;sm_sam_pictogram_gap_px_width = 23;&amp;#10;sm_sam_comp_img_size_height = 0.25;&amp;#10;sm_sam_comp_img_size_width = (sm_sam_comp_img_size_height * sm_sam_img_aspect);&amp;#10;sm_sam_comp_img_pos_y = 0.1;&amp;#10;sm_sam_comp_message_pos_y = (sm_sam_comp_img_pos_y + 0.2);&amp;#10;sm_sam_comp_slider_pos_y = (- 0.09);&amp;#10;sm_sam_comp_slider_size_height = 0.06;&amp;#10;sm_sam_slider_px_width = (sm_sam_img_px_width - 215);&amp;#10;sm_sam_comp_slider_width = (sm_sam_comp_img_size_width * (sm_sam_slider_px_width / sm_sam_img_px_width));&amp;#10;sm_sam_scale_factor = (sm_sam_comp_img_size_width / sm_sam_img_px_width);&amp;#10;sm_sam_pictogram_w = (sm_sam_pictogram_px_width * sm_sam_scale_factor);&amp;#10;sm_sam_gap_w = (sm_sam_pictogram_gap_px_width * sm_sam_scale_factor);&amp;#10;sm_sam_tick_positions = [];&amp;#10;sm_sam_tick_x = (((- sm_sam_comp_img_size_width) / 2) + (sm_sam_pictogram_w / 2));&amp;#10;for (var i, _pj_c = 0, _pj_a = util.range(9), _pj_b = _pj_a.length; (_pj_c &lt; _pj_b); _pj_c += 1) {&amp;#10;    i = _pj_a[_pj_c];&amp;#10;    sm_sam_tick_positions.push(sm_sam_tick_x);&amp;#10;    if (((i % 2) === 0)) {&amp;#10;        sm_sam_tick_x += ((sm_sam_pictogram_w / 2) + (sm_sam_gap_w / 2));&amp;#10;    } else {&amp;#10;        sm_sam_tick_x += ((sm_sam_gap_w / 2) + (sm_sam_pictogram_w / 2));&amp;#10;    }&amp;#10;}&amp;#10;sm_sam_comp_label_pos_y = (sm_sam_comp_slider_pos_y - 0.15);&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_state_measure_setup" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <CodeComponent name="code_phoda_slider_setup" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="# ============================================================&amp;#10;# =================== CONFIGURATION ==========================&amp;#10;# ============================================================&amp;#10;&amp;#10;# PHODA image settings&amp;#10;PS_PHODA_IMG_PATH = ''&amp;#10;PS_PHODA_IMG_PX_WIDTH = 283&amp;#10;PS_PHODA_IMG_PX_HEIGHT = 425&amp;#10;PS_PHODA_IMG_HEIGHT_RATIO = 0.62  # Percentage of screen height&amp;#10;PS_PHODA_IMG_POS_Y = 0.13  # Vertical position (0 = center, positive = above center)&amp;#10;&amp;#10;# Slider settings&amp;#10;PS_SLIDER_WIDTH_RATIO = 0.8  # Percentage of screen width&amp;#10;PS_SLIDER_HEIGHT = 0.08&amp;#10;PS_SLIDER_MARKER_WIDTH = 0.02&amp;#10;PS_SLIDER_GRANULARITY = 0  # 0 for continuous (VAS), 1 for integers&amp;#10;PS_SLIDER_TICKS = range(0, 101)&amp;#10;&amp;#10;# Spacing&amp;#10;PS_IMAGE_SLIDER_GAP = 0.08  # Vertical space between image and slider&amp;#10;PS_SLIDER_LABELS_GAP = 0.03  # Vertical space between slider and numeric labels&amp;#10;&amp;#10;# Label settings&amp;#10;PS_LABEL_VALUES = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]&amp;#10;PS_LABEL_HEIGHT = 0.03&amp;#10;PS_LABEL_FONT = 'Noto Sans'&amp;#10;PS_LABEL_COLOR = 'white'&amp;#10;&amp;#10;# Endpoint labels&amp;#10;PS_LABEL_LEFT_TEXT = 'Not at all\nharmful'&amp;#10;PS_LABEL_RIGHT_TEXT = 'Extremely\nharmful'&amp;#10;PS_LABEL_ENDPOINT_HEIGHT = 0.025&amp;#10;PS_LABEL_ENDPOINT_OFFSET = 0.055 # subtracted from label y-pos&amp;#10;&amp;#10;# Rating display&amp;#10;PS_RATING_TEXT_HEIGHT = 0.04&amp;#10;PS_RATING_TEXT_DEFAULT = 'Click or drag the slider to rate'&amp;#10;&amp;#10;# Auto logging for all components&amp;#10;PS_AUTO_LOG = False&amp;#10;PS_AUTO_LOG_SLIDER = False&amp;#10;&amp;#10;# ============================================================&amp;#10;# =================== HELPER FUNCTIONS =======================&amp;#10;# ============================================================&amp;#10;&amp;#10;def calculate_phoda_geometry():&amp;#10;    &quot;&quot;&quot;&amp;#10;    Calculate all geometry for PHODA image and slider layout.&amp;#10;    Returns a dictionary with all positioning and sizing values.&amp;#10;    &quot;&quot;&quot;&amp;#10;    # Image geometry&amp;#10;    img_aspect = PS_PHODA_IMG_PX_WIDTH / PS_PHODA_IMG_PX_HEIGHT&amp;#10;    img_height = PS_PHODA_IMG_HEIGHT_RATIO&amp;#10;    img_width = img_height * img_aspect&amp;#10;    &amp;#10;    # Slider geometry&amp;#10;    slider_width = aspect * PS_SLIDER_WIDTH_RATIO&amp;#10;    slider_height = PS_SLIDER_HEIGHT&amp;#10;    &amp;#10;    # Vertical positioning&amp;#10;    img_pos_y = PS_PHODA_IMG_POS_Y  # Use the defined position for the image&amp;#10;    img_bottom = img_pos_y - img_height / 2&amp;#10;    slider_pos_y = img_bottom - PS_IMAGE_SLIDER_GAP&amp;#10;    label_pos_y = slider_pos_y - slider_height / 2 - PS_SLIDER_LABELS_GAP&amp;#10;    &amp;#10;    # Slider boundaries&amp;#10;    slider_left = -slider_width / 2&amp;#10;    slider_right = slider_width / 2&amp;#10;    &amp;#10;    return {&amp;#10;        'img_width': img_width,&amp;#10;        'img_height': img_height,&amp;#10;        'img_pos_y': img_pos_y,&amp;#10;        'slider_width': slider_width,&amp;#10;        'slider_height': slider_height,&amp;#10;        'slider_pos_y': slider_pos_y,&amp;#10;        'slider_left': slider_left,&amp;#10;        'slider_right': slider_right,&amp;#10;        'label_pos_y': label_pos_y&amp;#10;    }&amp;#10;&amp;#10;def create_custom_slider(geom):&amp;#10;    &quot;&quot;&quot;&amp;#10;    Create and customize a PHODA slider with narrow marker.&amp;#10;    &quot;&quot;&quot;&amp;#10;    slider = visual.Slider(&amp;#10;        win=win,&amp;#10;        size=(geom['slider_width'], geom['slider_height']),&amp;#10;        pos=(0, geom['slider_pos_y']),&amp;#10;        ticks=PS_SLIDER_TICKS,&amp;#10;        labels=None,&amp;#10;        granularity=PS_SLIDER_GRANULARITY,&amp;#10;        style='scrollbar',&amp;#10;        flip=False,&amp;#10;        name=&quot;ps_phoda_slider&quot;,&amp;#10;        autoLog=PS_AUTO_LOG_SLIDER&amp;#10;&amp;#10;    )&amp;#10;    &amp;#10;    # Customize marker width&amp;#10;    slider.marker.size = (PS_SLIDER_MARKER_WIDTH, slider.marker.size[1])&amp;#10;    &amp;#10;    # Adjust line size (compensate for scrollbar's 20% extra width)&amp;#10;    slider.line.size = (geom['slider_width'] + PS_SLIDER_MARKER_WIDTH, slider.line.size[1])&amp;#10;    &amp;#10;    return slider&amp;#10;&amp;#10;def create_slider_labels(geom):&amp;#10;    &quot;&quot;&quot;&amp;#10;    Create numeric labels positioned along the slider.&amp;#10;    &quot;&quot;&quot;&amp;#10;    labels = []&amp;#10;    slider_left = geom['slider_left']&amp;#10;    slider_right = geom['slider_right']&amp;#10;    label_pos_y = geom['label_pos_y']&amp;#10;    &amp;#10;    for label_val in PS_LABEL_VALUES:&amp;#10;        label_ratio = label_val / 100&amp;#10;        x_pos = slider_left + (slider_right - slider_left) * label_ratio&amp;#10;        &amp;#10;        label_obj = visual.TextStim(&amp;#10;            win=win,&amp;#10;            text=str(label_val),&amp;#10;            pos=(x_pos, label_pos_y),&amp;#10;            height=PS_LABEL_HEIGHT,&amp;#10;            anchorVert='top',&amp;#10;            color=PS_LABEL_COLOR,&amp;#10;            font=PS_LABEL_FONT,&amp;#10;            name=f&quot;ps_slider_label_{label_val}&quot;,&amp;#10;            autoLog=PS_AUTO_LOG&amp;#10;        )&amp;#10;        labels.append(label_obj)&amp;#10;    &amp;#10;    return labels&amp;#10;&amp;#10;def create_endpoint_labels(geom):&amp;#10;    &quot;&quot;&quot;&amp;#10;    Create left and right endpoint description labels.&amp;#10;    &quot;&quot;&quot;&amp;#10;    label_left = visual.TextStim(&amp;#10;        win=win,&amp;#10;        text=PS_LABEL_LEFT_TEXT,&amp;#10;        pos=(geom['slider_left'], geom['label_pos_y'] - PS_LABEL_ENDPOINT_OFFSET),&amp;#10;        height=PS_LABEL_ENDPOINT_HEIGHT,&amp;#10;        anchorVert='top',&amp;#10;        color=PS_LABEL_COLOR,&amp;#10;        font=PS_LABEL_FONT,&amp;#10;        name=&quot;ps_label_left&quot;,&amp;#10;        autoLog=PS_AUTO_LOG&amp;#10;    )&amp;#10;    &amp;#10;    label_right = visual.TextStim(&amp;#10;        win=win,&amp;#10;        text=PS_LABEL_RIGHT_TEXT,&amp;#10;        pos=(geom['slider_right'], geom['label_pos_y'] - PS_LABEL_ENDPOINT_OFFSET),&amp;#10;        height=PS_LABEL_ENDPOINT_HEIGHT,&amp;#10;        anchorVert='top',&amp;#10;        color=PS_LABEL_COLOR,&amp;#10;        font=PS_LABEL_FONT,&amp;#10;        name=&quot;ps_label_right&quot;,&amp;#10;        autoLog=PS_AUTO_LOG&amp;#10;    )&amp;#10;    &amp;#10;    return label_left, label_right&amp;#10;&amp;#10;def run_phoda_trial():&amp;#10;    &quot;&quot;&quot;&amp;#10;    Draw all PHODA components on the window.&amp;#10;    &quot;&quot;&quot;&amp;#10;    ps_phoda_slider.draw()&amp;#10;    for label in ps_manual_labels:&amp;#10;        label.draw()&amp;#10;    ps_phoda_label_left.draw()&amp;#10;    ps_phoda_label_right.draw()&amp;#10;    &amp;#10;    # Update rating display in real-time&amp;#10;    if ps_phoda_slider.markerPos is not None:&amp;#10;        if PS_SLIDER_GRANULARITY == 0:&amp;#10;            # Show float for VAS (continuous)&amp;#10;            ps_phoda_rating_text.text = f'Current rating: {ps_phoda_slider.markerPos:.1f}'&amp;#10;        else:&amp;#10;            # Show integer for discrete scale&amp;#10;            ps_phoda_rating_text.text = f'Current rating: {int(ps_phoda_slider.markerPos)}'&amp;#10;    else:&amp;#10;        ps_phoda_rating_text.text = PS_RATING_TEXT_DEFAULT&amp;#10;    &amp;#10;    ps_phoda_rating_text.draw()&amp;#10;&amp;#10;def phoda_autodraw_on():&amp;#10;    &quot;&quot;&quot;&amp;#10;    Turn on AutoDraw for all PHODA components on the window.&amp;#10;    &quot;&quot;&quot;&amp;#10;    ps_phoda_slider.setAutoDraw(True)&amp;#10;    for label in ps_manual_labels:&amp;#10;        label.setAutoDraw(True)&amp;#10;    ps_phoda_label_left.setAutoDraw(True)&amp;#10;    ps_phoda_label_right.setAutoDraw(True)&amp;#10;    ps_phoda_rating_text.setAutoDraw(True)&amp;#10;    logging.exp(&quot;PHODA components: AutoDraw ON&quot;)&amp;#10;&amp;#10;def phoda_autodraw_off():&amp;#10;    &quot;&quot;&quot;&amp;#10;    Turn off AutoDraw for all PHODA components on the window.&amp;#10;    &quot;&quot;&quot;&amp;#10;    ps_phoda_slider.setAutoDraw(False)&amp;#10;    for label in ps_manual_labels:&amp;#10;        label.setAutoDraw(False)&amp;#10;    ps_phoda_label_left.setAutoDraw(False)&amp;#10;    ps_phoda_label_right.setAutoDraw(False)&amp;#10;    ps_phoda_rating_text.setAutoDraw(False)&amp;#10;    logging.exp(&quot;PHODA components: AutoDraw OFF&quot;)&amp;#10;&amp;#10;def update_phoda_rating_text(last_rating_value):&amp;#10;    &quot;&quot;&quot;&amp;#10;    Update the PHODA rating display text if the slider value has changed.&amp;#10;    &quot;&quot;&quot;&amp;#10;    current = ps_phoda_slider.markerPos&amp;#10;&amp;#10;    # Only update when the value actually changes&amp;#10;    if current != last_rating_value:&amp;#10;        if current is None:&amp;#10;            ps_phoda_rating_text.text = PS_RATING_TEXT_DEFAULT&amp;#10;        else:&amp;#10;            if PS_SLIDER_GRANULARITY == 0:&amp;#10;                ps_phoda_rating_text.text = f'Current rating: {current:.1f}'&amp;#10;            else:&amp;#10;                ps_phoda_rating_text.text = f'Current rating: {int(current)}'&amp;#10;&amp;#10;        # Update the flag&amp;#10;        last_rating_value = current&amp;#10;&amp;#10;    return last_rating_value&amp;#10;&amp;#10;# Calculate all geometry&amp;#10;ps_geom = calculate_phoda_geometry()&amp;#10;&amp;#10;# ============================================================&amp;#10;# =================== CREATE COMPONENTS ======================&amp;#10;# ============================================================&amp;#10;&amp;#10;# PHODA image&amp;#10;ps_phoda_comp_img_pos_y = ps_geom['img_pos_y']&amp;#10;ps_phoda_comp_img_size = (ps_geom['img_width'], ps_geom['img_height'])&amp;#10;&amp;#10;# Custom slider&amp;#10;ps_phoda_slider = create_custom_slider(ps_geom)&amp;#10;&amp;#10;# Slider labels&amp;#10;ps_manual_labels = create_slider_labels(ps_geom)&amp;#10;&amp;#10;# Endpoint labels&amp;#10;ps_phoda_label_left, ps_phoda_label_right = create_endpoint_labels(ps_geom)&amp;#10;t_phoda_continue_pos_y = ps_geom['label_pos_y'] - PS_LABEL_ENDPOINT_OFFSET -0.02&amp;#10;&amp;#10;# Rating display text&amp;#10;ps_phoda_rating_text = visual.TextStim(&amp;#10;    win=win,&amp;#10;    text=PS_RATING_TEXT_DEFAULT,&amp;#10;    pos=(0, ps_geom['slider_pos_y']),&amp;#10;    height=PS_RATING_TEXT_HEIGHT,&amp;#10;    bold=True,&amp;#10;    color=PS_LABEL_COLOR,&amp;#10;    font=PS_LABEL_FONT,&amp;#10;    name=&quot;ps_phoda_rating_text&quot;,&amp;#10;    autoLog=PS_AUTO_LOG&amp;#10;)&amp;#10;" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_phoda_slider_setup" valType="code" updates="None" name="name"/>
      </CodeComponent>
    </Routine>
    <Routine name="welcome">
      <RoutineSettingsComponent name="welcome" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="welcome" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="t_welcome_body" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.07" valType="num" updates="constant" name="letterHeight"/>
        <Param val="t_welcome_body" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0.0, 0.05)" valType="list" updates="constant" name="pos"/>
        <Param val="False" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="$Message" valType="str" updates="set every repeat" name="text"/>
        <Param val="height" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="comp_wrap_width_body" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <TextComponent name="t_welcome_continue" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.04" valType="num" updates="constant" name="letterHeight"/>
        <Param val="t_welcome_continue" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, -0.35)" valType="list" updates="constant" name="pos"/>
        <Param val="False" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Press the SPACEBAR to continue" valType="str" updates="constant" name="text"/>
        <Param val="height" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="comp_wrap_width_continue" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_welcome" plugin="None">
        <Param val="'space'" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_welcome" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="False" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="nothing" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="stateMeasure">
      <RoutineSettingsComponent name="stateMeasure" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="This routine presents a rating scale that adapts based on parameters supplied by the surrounding loop.&amp;#10;To use it, place stateMeasure inside a loop whose conditions file includes the following columns:&amp;#10;- rating_type&amp;#10;- rating_category&amp;#10;- rating_message&amp;#10;- rating_min_label&amp;#10;- rating_max_label&amp;#10;- picture_path (SAM only; expects a 1168×231 image)&amp;#10;- tick_values&amp;#10;- granularity&amp;#10;- style&amp;#10;The routine reads these values on each iteration and configures the slider dynamically.&amp;#10;The experiment must include the code_state_measure_setup component, which handles global setup and shared logic." valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="stateMeasure" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_sm_helper" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="[screen_width, screen_height] = psychoJS.window.size;&amp;#10;aspect = (screen_width / screen_height);&amp;#10;leftEdge = ((- aspect) / 2);&amp;#10;rightEdge = (aspect / 2);&amp;#10;topEdge = 0.5;&amp;#10;bottomEdge = (- 0.5);&amp;#10;sam_aspect = (2200 / 264);&amp;#10;sam_height = 0.2;&amp;#10;sam_width = (sam_height * sam_aspect);&amp;#10;" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="allowContinue = False&amp;#10;&amp;#10;# Parse tick values from the condition file&amp;#10;tick_values_parsed = parse_tick_values(tick_values)&amp;#10;&amp;#10;try:&amp;#10;    logging.debug(f&quot;Starting state-measure in loop: {currentLoop.name}&quot;)&amp;#10;    logging.debug(f&quot;State-measure current row: {rating_category}, {rating_type}&quot;)&amp;#10;    logging.debug(f&quot;State-measure tick values: {tick_values_parsed}&quot;)&amp;#10;except:&amp;#10;    logging.error(&quot;Error printing current state measure row.&quot;)&amp;#10;&amp;#10;# Compute geometry based on rating type&amp;#10;sm_geometry = sm_compute_tick_positions(tick_values_parsed, rating_type)&amp;#10;&amp;#10;sm_comp_slider_size = sm_geometry[&quot;slider_size&quot;]&amp;#10;sm_comp_slider_pos  = sm_geometry[&quot;slider_pos&quot;]&amp;#10;sm_comp_label_min_pos = sm_geometry[&quot;label_min_pos&quot;]&amp;#10;sm_comp_label_max_pos = sm_geometry[&quot;label_max_pos&quot;]&amp;#10;&amp;#10;t_sm_label_min = visual.TextStim(&amp;#10;    win=win,&amp;#10;    text=rating_min_label,&amp;#10;    pos=(sm_comp_label_min_pos[0], sm_comp_label_min_pos[1]),&amp;#10;    wrapWidth=aspect20,&amp;#10;    anchorVert='top',&amp;#10;    height=0.05,&amp;#10;    color='white',&amp;#10;    font='Noto Sans'&amp;#10;)&amp;#10;&amp;#10;t_sm_label_max = visual.TextStim(&amp;#10;    win=win,&amp;#10;    text=rating_max_label,&amp;#10;    pos=(sm_comp_label_max_pos[0], sm_comp_label_max_pos[1]),&amp;#10;    wrapWidth=aspect20,&amp;#10;    anchorVert='top',&amp;#10;    height=0.05,&amp;#10;    color='white',&amp;#10;    font='Noto Sans'&amp;#10;)&amp;#10;&amp;#10;#t_label_min.setPos(sm_comp_label_min_pos)&amp;#10;#t_label_max.setPos(sm_comp_label_max_pos)&amp;#10;&amp;#10;# --- Create a fresh slider for this trial ---&amp;#10;sm_slider = visual.Slider(&amp;#10;    win=win,&amp;#10;    ticks=tick_values_parsed,&amp;#10;    labels=tick_values_parsed,&amp;#10;    granularity=granularity,&amp;#10;    style=style.lower(),&amp;#10;    pos=sm_comp_slider_pos,&amp;#10;    size=sm_comp_slider_size,&amp;#10;    labelHeight=0.05,&amp;#10;    colorSpace='rgb',&amp;#10;    markerColor='Red',&amp;#10;    lineColor='White',&amp;#10;    labelColor='LightGray',&amp;#10;    font='Noto Sans'&amp;#10;)&amp;#10;&amp;#10;# --- SAM image logic ---&amp;#10;if rating_type == 'SAM':&amp;#10;    image_SAM.setImage(picture_path)&amp;#10;    image_SAM.setAutoDraw(True)&amp;#10;else:&amp;#10;    image_SAM.setAutoDraw(False)&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Draw state measure components&amp;#10;sm_slider.draw()&amp;#10;t_sm_label_min.draw()&amp;#10;t_sm_label_max.draw()&amp;#10;&amp;#10;# If rated, allow spacebar to end the routine&amp;#10;if sm_slider.getRating() is not None:&amp;#10;    allowContinue = True&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="#thisExp.addData('rating', sm_slider.getRating())&amp;#10;currentLoop.addData('rating', sm_slider.getRating())&amp;#10;currentLoop.addData('rating_rt', sm_slider.getRT())&amp;#10;&amp;#10;try:&amp;#10;    logging.data(f&quot;State-measure rating: {rating_category}, {sm_slider.getRating()}&quot;)&amp;#10;except:&amp;#10;    logging.error(&quot;Error printing state-measure rating&quot;)" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_sm_helper" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <ImageComponent name="image_SAM" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="$picture_path" valType="file" updates="set every repeat" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image_SAM" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, sm_sam_comp_img_pos_y)" valType="list" updates="set every repeat" name="pos"/>
        <Param val="False" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="(sm_sam_comp_img_size_width, sm_sam_comp_img_size_height)" valType="list" updates="set every repeat" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="height" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <TextComponent name="t_sm_message" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.07" valType="num" updates="constant" name="letterHeight"/>
        <Param val="t_sm_message" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, .35)" valType="list" updates="constant" name="pos"/>
        <Param val="False" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="$rating_message" valType="str" updates="set every repeat" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="comp_wrap_width_header" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <TextComponent name="t_sm_continue" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.04" valType="num" updates="constant" name="letterHeight"/>
        <Param val="t_sm_continue" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, -0.35)" valType="list" updates="constant" name="pos"/>
        <Param val="False" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="condition" valType="str" updates="None" name="startType"/>
        <Param val="$allowContinue == True" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Press the SPACEBAR to continue" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="comp_wrap_width_continue" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_sm" plugin="None">
        <Param val="'space'" valType="list" updates="set every repeat" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_sm" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="False" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="condition" valType="str" updates="None" name="startType"/>
        <Param val="$allowContinue == True" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="nothing" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="instruction">
      <RoutineSettingsComponent name="instruction" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="instruction" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_instruction_helper" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="view_mode_text = 'You will see photographs of daily activities.\n\nIn this block, simply view each picture without making a rating.'&amp;#10;rate_mode_text = 'You will see photographs of daily activities.\n\nFor each picture, please rate how harmful you feel the activity is to your body.'" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# ------------------------------------------------------------&amp;#10;# code_instruction_helper&amp;#10;&amp;#10;# Select the appropriate instruction text based &amp;#10;# on the current trial's mode value&amp;#10;# ------------------------------------------------------------&amp;#10;# Determine whether this PHODA trial is in view or rate mode.&amp;#10;# In view mode, components must be allowed to start immediately.&amp;#10;isModeView = (mode == 'view')&amp;#10;isModeRate = (mode == 'rate')&amp;#10;&amp;#10;if isModeView:&amp;#10;    instruction_text = view_mode_text&amp;#10;elif isModeRate:&amp;#10;    instruction_text = rate_mode_text&amp;#10;else:&amp;#10;    # Fallback message in case the condition file contains an&amp;#10;    # unexpected category. This helps catch typos or file issues.&amp;#10;    instruction_text = &quot;Unknown mode. Please contact the experimenter.&quot;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_instruction_helper" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="t_instruction_body" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.07" valType="num" updates="constant" name="letterHeight"/>
        <Param val="t_instruction_body" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0.0, 0.05)" valType="list" updates="constant" name="pos"/>
        <Param val="False" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="$instruction_text" valType="str" updates="set every repeat" name="text"/>
        <Param val="height" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="comp_wrap_width_body" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <TextComponent name="t_instruction_continue" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.04" valType="num" updates="constant" name="letterHeight"/>
        <Param val="t_instruction_continue" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, -0.35)" valType="list" updates="constant" name="pos"/>
        <Param val="False" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Press the SPACEBAR to begin" valType="str" updates="constant" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="comp_wrap_width_continue" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_instruction" plugin="None">
        <Param val="'space'" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_instruction" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="False" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="nothing" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="phodaDelay">
      <RoutineSettingsComponent name="phodaDelay" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="The delay duration is randomized between 1.5-2.5 seconds using the code_delay_calculator component." valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="2.5" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="phodaDelay" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_delay_calculator" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# Gives a random float between 1.5 and 2.5 seconds (i.e., 1500–2500 ms)&amp;#10;# Used for t_blank_delayer&amp;#10;delay_time = random.uniform(1.5, 2.5)&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_delay_calculator" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <TextComponent name="t_blank_delayer" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="2.5" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="t_blank_delayer" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="False" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="$delay_time" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="" valType="str" updates="set every repeat" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <TextComponent name="t_test_mode" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="True" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="2.5" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.05" valType="num" updates="constant" name="letterHeight"/>
        <Param val="t_test_mode" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0.2)" valType="list" updates="constant" name="pos"/>
        <Param val="False" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="$delay_time" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="$mode" valType="str" updates="set every repeat" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <PolygonComponent name="cross_fixation" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="True" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="2.5" valType="code" updates="None" name="durationEstim"/>
        <Param val="white" valType="color" updates="constant" name="fillColor"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="white" valType="color" updates="constant" name="lineColor"/>
        <Param val="1" valType="num" updates="constant" name="lineWidth"/>
        <Param val="4" valType="int" updates="constant" name="nVertices"/>
        <Param val="cross_fixation" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="cross" valType="str" updates="None" name="shape"/>
        <Param val="(0.2, 0.2)" valType="list" updates="constant" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="$delay_time" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="height" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="" valType="list" updates="constant" name="vertices"/>
      </PolygonComponent>
    </Routine>
    <Routine name="phodaView">
      <RoutineSettingsComponent name="phodaView" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="This routine presents a PHODA image for 6 seconds and optionally allows participant rating depending on the trial mode.&amp;#10;&amp;#10;code_phoda_helper: Sets the image path for the current trial, draws and manages the custom slider (if in rate mode), logs the rating and response time, and records the randomized delay duration from the preceding phodaDelay routine.&amp;#10;&amp;#10;image_phoda: Displays the PHODA image for a fixed duration of 6 seconds, regardless of trial mode.&amp;#10;&amp;#10;p_port_phoda: Sends a port signal while the image is on screen, starting when image_phoda begins and stopping when it ends - used for EEG/EMG synchronization.&amp;#10;&amp;#10;t_phoda_continue &amp; key_resp_phoda: Only active during rate trials. These components allow the participant to continue once a rating is made. In view mode, they are bypassed, and the image disappears automatically after 6 seconds." valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="6" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="phodaView" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <CodeComponent name="code_phoda_helper" plugin="None">
        <Param val="" valType="extendedCode" updates="constant" name="Before Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Before JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="Begin JS Routine"/>
        <Param val="# PsychoPy Builder evaluates component start conditions before any code runs.&amp;#10;# We compute a stable flag here so both t_phoda_continue and key_resp_phoda&amp;#10;# can rely on it without hitting race‑condition issues.&amp;#10;canContinue = isModeView&amp;#10;&amp;#10;# Tracks the last displayed slider value so we only update the rating text&amp;#10;# when the marker actually changes. This prevents unnecessary property updates&amp;#10;# and keeps the log file clean.&amp;#10;last_rating_value = &quot;INIT&quot;&amp;#10;&amp;#10;# Only draw slider components in rate mode. View mode hides all rating UI.&amp;#10;if isModeRate:&amp;#10;    phoda_autodraw_on()&amp;#10;&amp;#10;# Reset the slider so markerPos doesn't carry over between trials.&amp;#10;ps_phoda_slider.reset()&amp;#10;&amp;#10;# Set the image path for this trial. Used by image_phoda to load the correct photo.&amp;#10;ps_phoda_img_path = f'phoda-stimuli\\{phoda_photo}'&amp;#10;" valType="extendedCode" updates="constant" name="Begin Routine"/>
        <Param val="Py" valType="str" updates="None" name="Code Type"/>
        <Param val="# Draws the slider, labels, and rating&amp;#10;if isModeRate:&amp;#10;    last_rating_value = update_phoda_rating_text(last_rating_value)&amp;#10;    # If rated, allow spacebar to end the routine&amp;#10;    if ps_phoda_slider.getRating() is not None:&amp;#10;        canContinue = True&amp;#10;&amp;#10;" valType="extendedCode" updates="constant" name="Each Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="Each JS Frame"/>
        <Param val="" valType="extendedCode" updates="constant" name="End Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Experiment"/>
        <Param val="" valType="extendedCode" updates="constant" name="End JS Routine"/>
        <Param val="phoda_autodraw_off()&amp;#10;&amp;#10;if isModeRate:&amp;#10;    currentLoop.addData('rating', ps_phoda_slider.getRating())&amp;#10;    currentLoop.addData('rating_rt', ps_phoda_slider.getRT())&amp;#10;    currentLoop.addData('delay_time', delay_time)&amp;#10;    try:&amp;#10;        print(f'{phoda_photo} rating: {ps_phoda_slider.getRating()}')&amp;#10;        logging.data(f'{phoda_photo} rating: {ps_phoda_slider.getRating()}')&amp;#10;        logging.data(f'{phoda_photo} rating_rt: {ps_phoda_slider.getRT()}')&amp;#10;    except:&amp;#10;        logging.error(&quot;Error printing phoda rating&quot;)" valType="extendedCode" updates="constant" name="End Routine"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="code_phoda_helper" valType="code" updates="None" name="name"/>
      </CodeComponent>
      <ImageComponent name="image_phoda" plugin="None">
        <Param val="center" valType="str" updates="constant" name="anchor"/>
        <Param val="$[1,1,1]" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="6" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="bool" updates="constant" name="flipHoriz"/>
        <Param val="False" valType="bool" updates="constant" name="flipVert"/>
        <Param val="$ps_phoda_img_path" valType="file" updates="set every repeat" name="image"/>
        <Param val="linear" valType="str" updates="constant" name="interpolate"/>
        <Param val="" valType="str" updates="constant" name="mask"/>
        <Param val="image_phoda" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, ps_phoda_comp_img_pos_y)" valType="list" updates="set every repeat" name="pos"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="$ps_phoda_comp_img_size" valType="list" updates="set every repeat" name="size"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="6" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="128" valType="num" updates="constant" name="texture resolution"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
      </ImageComponent>
      <ParallelOutComponent name="p_port_phoda" plugin="None">
        <Param val="0x0378" valType="str" updates="None" name="address"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="6" valType="code" updates="None" name="durationEstim"/>
        <Param val="p_port_phoda" valType="code" updates="None" name="name"/>
        <Param val="EIO" valType="str" updates="None" name="register"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="1" valType="code" updates="None" name="startData"/>
        <Param val="0" valType="code" updates="None" name="startEstim"/>
        <Param val="condition" valType="str" updates="None" name="startType"/>
        <Param val="image_phoda.status == STARTED" valType="code" updates="None" name="startVal"/>
        <Param val="0" valType="code" updates="None" name="stopData"/>
        <Param val="condition" valType="str" updates="None" name="stopType"/>
        <Param val="image_phoda.status == STOPPED" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreen"/>
        <Param val="False" valType="bool" updates="None" name="syncScreenRefresh"/>
      </ParallelOutComponent>
      <TextComponent name="t_phoda_continue" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="5.5" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.04" valType="num" updates="constant" name="letterHeight"/>
        <Param val="t_phoda_continue" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, t_phoda_continue_pos_y)" valType="list" updates="set every repeat" name="pos"/>
        <Param val="False" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="0.5" valType="code" updates="None" name="startEstim"/>
        <Param val="condition" valType="str" updates="None" name="startType"/>
        <Param val="$canContinue" valType="code" updates="None" name="startVal"/>
        <Param val="condition" valType="str" updates="None" name="stopType"/>
        <Param val="$isModeView" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="Press the SPACEBAR to continue" valType="str" updates="set every repeat" name="text"/>
        <Param val="from exp settings" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="comp_wrap_width_continue" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_phoda" plugin="None">
        <Param val="'space'" valType="list" updates="constant" name="allowedKeys"/>
        <Param val="" valType="str" updates="constant" name="correctAns"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="True" valType="bool" updates="constant" name="discard previous"/>
        <Param val="5.5" valType="code" updates="None" name="durationEstim"/>
        <Param val="True" valType="bool" updates="constant" name="forceEndRoutine"/>
        <Param val="key_resp_phoda" valType="code" updates="None" name="name"/>
        <Param val="press" valType="str" updates="constant" name="registerOn"/>
        <Param val="False" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="0.5" valType="code" updates="None" name="startEstim"/>
        <Param val="condition" valType="str" updates="None" name="startType"/>
        <Param val="$canContinue" valType="code" updates="None" name="startVal"/>
        <Param val="condition" valType="str" updates="None" name="stopType"/>
        <Param val="$isModeView" valType="code" updates="constant" name="stopVal"/>
        <Param val="nothing" valType="str" updates="constant" name="store"/>
        <Param val="False" valType="bool" updates="constant" name="storeCorrect"/>
        <Param val="True" valType="bool" updates="constant" name="syncScreenRefresh"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="goodbye">
      <RoutineSettingsComponent name="goodbye" plugin="None">
        <Param val="none" valType="str" updates="None" name="backgroundFit"/>
        <Param val="" valType="str" updates="None" name="backgroundImg"/>
        <Param val="$[0,0,0]" valType="color" updates="None" name="color"/>
        <Param val="rgb" valType="str" updates="None" name="colorSpace"/>
        <Param val="" valType="str" updates="constant" name="desc"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="False" valType="code" updates="None" name="forceNonSlip"/>
        <Param val="goodbye" valType="code" updates="None" name="name"/>
        <Param val="True" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="constant" name="skipIf"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="4" valType="code" updates="constant" name="stopVal"/>
        <Param val="False" valType="bool" updates="None" name="useWindowParams"/>
      </RoutineSettingsComponent>
      <TextComponent name="t_goodbye" plugin="None">
        <Param val="white" valType="color" updates="constant" name="color"/>
        <Param val="rgb" valType="str" updates="constant" name="colorSpace"/>
        <Param val="1" valType="num" updates="constant" name="contrast"/>
        <Param val="False" valType="bool" updates="None" name="disabled"/>
        <Param val="False" valType="code" updates="constant" name="draggable"/>
        <Param val="" valType="code" updates="None" name="durationEstim"/>
        <Param val="None" valType="str" updates="constant" name="flip"/>
        <Param val="Arial" valType="str" updates="constant" name="font"/>
        <Param val="LTR" valType="str" updates="None" name="languageStyle"/>
        <Param val="0.07" valType="num" updates="constant" name="letterHeight"/>
        <Param val="t_goodbye" valType="code" updates="None" name="name"/>
        <Param val="" valType="num" updates="constant" name="opacity"/>
        <Param val="0" valType="num" updates="constant" name="ori"/>
        <Param val="(0, 0)" valType="list" updates="constant" name="pos"/>
        <Param val="False" valType="bool" updates="None" name="saveStartStop"/>
        <Param val="" valType="code" updates="None" name="startEstim"/>
        <Param val="time (s)" valType="str" updates="None" name="startType"/>
        <Param val="0.0" valType="code" updates="None" name="startVal"/>
        <Param val="duration (s)" valType="str" updates="None" name="stopType"/>
        <Param val="4" valType="code" updates="constant" name="stopVal"/>
        <Param val="True" valType="bool" updates="None" name="syncScreenRefresh"/>
        <Param val="You have completed the trial. Thank you!" valType="str" updates="constant" name="text"/>
        <Param val="height" valType="str" updates="None" name="units"/>
        <Param val="" valType="code" updates="None" name="validator"/>
        <Param val="comp_wrap_width_header" valType="num" updates="constant" name="wrapWidth"/>
      </TextComponent>
    </Routine>
  </Routines>
  <Flow>
    <Routine name="experimentSetup"/>
    <LoopInitiator loopType="TrialHandler" name="intro_prompts">
      <Param name="Selected rows" updates="None" val="" valType="str"/>
      <Param name="conditions" updates="None" val="[OrderedDict([('Message', 'Phoda Picture Viewing Task\n-Photographs of Daily Activities-')]), OrderedDict([('Message', 'In this task, you will complete two picture‑viewing blocks.\n\nOne block will ask you to rate each picture,\nand one block will ask you to simply view the pictures.')]), OrderedDict([('Message', 'The trial will begin on the following screen.\n\nPlease let us know if you have any remaining questions.')])]" valType="str"/>
      <Param name="conditionsFile" updates="None" val="loopPhodaIntro.csv" valType="file"/>
      <Param name="endPoints" updates="None" val="[0, 1]" valType="num"/>
      <Param name="isTrials" updates="None" val="False" valType="bool"/>
      <Param name="loopType" updates="None" val="sequential" valType="str"/>
      <Param name="nReps" updates="None" val="1" valType="num"/>
      <Param name="name" updates="None" val="intro_prompts" valType="code"/>
      <Param name="random seed" updates="None" val="" valType="code"/>
    </LoopInitiator>
    <Routine name="welcome"/>
    <LoopTerminator name="intro_prompts"/>
    <LoopInitiator loopType="TrialHandler" name="state_measure_pretrial">
      <Param name="Selected rows" updates="None" val="0:7" valType="str"/>
      <Param name="conditions" updates="None" val="[OrderedDict([('rating_type', 'Generic'), ('rating_category', 'Fatigue'), ('rating_message', 'Rate your current fatigue level'), ('rating_min_label', 'No fatigue at all'), ('rating_max_label', 'As bad as you can imagine'), ('picture_path', None), ('tick_values', '0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10'), ('granularity', np.int64(1)), ('style', 'rating')]), OrderedDict([('rating_type', 'Generic'), ('rating_category', 'Sleepiness'), ('rating_message', 'Rate your current sleepiness level'), ('rating_min_label', 'Not at all sleepy'), ('rating_max_label', 'As bad as you can imagine'), ('picture_path', None), ('tick_values', '0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10'), ('granularity', np.int64(1)), ('style', 'rating')]), OrderedDict([('rating_type', 'Generic'), ('rating_category', 'Pain'), ('rating_message', 'Rate your current pain level'), ('rating_min_label', 'No pain'), ('rating_max_label', 'Worst possible pain'), ('picture_path', None), ('tick_values', '0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10'), ('granularity', np.int64(1)), ('style', 'rating')]), OrderedDict([('rating_type', 'Generic'), ('rating_category', 'Pain Unpleasantness'), ('rating_message', 'Rate your current pain unpleasantness level'), ('rating_min_label', 'Not at all unpleasant pain'), ('rating_max_label', 'Worst possible unpleasant pain'), ('picture_path', None), ('tick_values', '0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10'), ('granularity', np.int64(1)), ('style', 'rating')]), OrderedDict([('rating_type', 'SAM'), ('rating_category', 'Valence'), ('rating_message', 'Rate how pleasant or unpleasant you feel'), ('rating_min_label', 'Pleasant'), ('rating_max_label', 'Unpleasant'), ('picture_path', '../../shared/pictures/sam-valence.png'), ('tick_values', '1, 2, 3, 4, 5, 6, 7, 8, 9'), ('granularity', np.int64(1)), ('style', 'radio')]), OrderedDict([('rating_type', 'SAM'), ('rating_category', 'Arousal'), ('rating_message', 'Rate how calm or excited you feel'), ('rating_min_label', 'Calm'), ('rating_max_label', 'Excited'), ('picture_path', '../../shared/pictures/sam-arousal.png'), ('tick_values', '1, 2, 3, 4, 5, 6, 7, 8, 9'), ('granularity', np.int64(1)), ('style', 'radio')]), OrderedDict([('rating_type', 'SAM'), ('rating_category', 'Dominance'), ('rating_message', 'Rate how dominated or in control you feel'), ('rating_min_label', 'Dominated'), ('rating_max_label', 'In Control'), ('picture_path', '../../shared/pictures/sam-dominance.png'), ('tick_values', '1, 2, 3, 4, 5, 6, 7, 8, 9'), ('granularity', np.int64(1)), ('style', 'radio')]), OrderedDict([('rating_type', 'Generic'), ('rating_category', 'Emotion Regulation'), ('rating_message', 'Rate how successful you were in doing the emotion regulation tasks'), ('rating_min_label', 'Not at all successful'), ('rating_max_label', 'Completely successful'), ('picture_path', None), ('tick_values', '0, 1, 2, 3, 4, 5, 6, 7'), ('granularity', np.int64(1)), ('style', 'rating')])]" valType="str"/>
      <Param name="conditionsFile" updates="None" val="../../shared/loop-templates/loopStateMeasure.csv" valType="file"/>
      <Param name="endPoints" updates="None" val="[0, 1]" valType="num"/>
      <Param name="isTrials" updates="None" val="True" valType="bool"/>
      <Param name="loopType" updates="None" val="sequential" valType="str"/>
      <Param name="nReps" updates="None" val="1" valType="num"/>
      <Param name="name" updates="None" val="state_measure_pretrial" valType="code"/>
      <Param name="random seed" updates="None" val="" valType="code"/>
    </LoopInitiator>
    <Routine name="stateMeasure"/>
    <LoopTerminator name="state_measure_pretrial"/>
    <LoopInitiator loopType="TrialHandler" name="phoda_mode_loop">
      <Param name="Selected rows" updates="None" val="" valType="str"/>
      <Param name="conditions" updates="None" val="[OrderedDict([('mode', 'view')]), OrderedDict([('mode', 'rate')])]" valType="str"/>
      <Param name="conditionsFile" updates="None" val="loopPhodaMode.csv" valType="file"/>
      <Param name="endPoints" updates="None" val="[0, 1]" valType="num"/>
      <Param name="isTrials" updates="None" val="True" valType="bool"/>
      <Param name="loopType" updates="None" val="random" valType="str"/>
      <Param name="nReps" updates="None" val="1" valType="num"/>
      <Param name="name" updates="None" val="phoda_mode_loop" valType="code"/>
      <Param name="random seed" updates="None" val="" valType="code"/>
    </LoopInitiator>
    <Routine name="instruction"/>
    <LoopInitiator loopType="TrialHandler" name="phoda_trials">
      <Param name="Selected rows" updates="None" val="" valType="str"/>
      <Param name="conditions" updates="None" val="[OrderedDict([('phoda_photo', '002.jpg')]), OrderedDict([('phoda_photo', '003.jpg')]), OrderedDict([('phoda_photo', '004.jpg')]), OrderedDict([('phoda_photo', '007.jpg')]), OrderedDict([('phoda_photo', '008.jpg')]), OrderedDict([('phoda_photo', '011.jpg')]), OrderedDict([('phoda_photo', '014.jpg')]), OrderedDict([('phoda_photo', '015.jpg')]), OrderedDict([('phoda_photo', '018.jpg')]), OrderedDict([('phoda_photo', '020.jpg')]), OrderedDict([('phoda_photo', '022.jpg')]), OrderedDict([('phoda_photo', '023.jpg')]), OrderedDict([('phoda_photo', '026.jpg')]), OrderedDict([('phoda_photo', '027.jpg')]), OrderedDict([('phoda_photo', '028.jpg')]), OrderedDict([('phoda_photo', '029.jpg')]), OrderedDict([('phoda_photo', '033.jpg')]), OrderedDict([('phoda_photo', '036.jpg')]), OrderedDict([('phoda_photo', '040.jpg')]), OrderedDict([('phoda_photo', '044.jpg')]), OrderedDict([('phoda_photo', '047.jpg')]), OrderedDict([('phoda_photo', '049.jpg')]), OrderedDict([('phoda_photo', '050.jpg')]), OrderedDict([('phoda_photo', '051.jpg')]), OrderedDict([('phoda_photo', '057.jpg')]), OrderedDict([('phoda_photo', '059.jpg')]), OrderedDict([('phoda_photo', '060.jpg')]), OrderedDict([('phoda_photo', '061.jpg')]), OrderedDict([('phoda_photo', '073.jpg')]), OrderedDict([('phoda_photo', '074.jpg')]), OrderedDict([('phoda_photo', '083.jpg')]), OrderedDict([('phoda_photo', '085.jpg')]), OrderedDict([('phoda_photo', '092.jpg')]), OrderedDict([('phoda_photo', '093.jpg')]), OrderedDict([('phoda_photo', '094.jpg')]), OrderedDict([('phoda_photo', '095.jpg')]), OrderedDict([('phoda_photo', '096.jpg')]), OrderedDict([('phoda_photo', '098.jpg')]), OrderedDict([('phoda_photo', '099.jpg')]), OrderedDict([('phoda_photo', '100.jpg')])]" valType="str"/>
      <Param name="conditionsFile" updates="None" val="phodaPhotoList.csv" valType="file"/>
      <Param name="endPoints" updates="None" val="[0, 1]" valType="num"/>
      <Param name="isTrials" updates="None" val="True" valType="bool"/>
      <Param name="loopType" updates="None" val="random" valType="str"/>
      <Param name="nReps" updates="None" val="1" valType="num"/>
      <Param name="name" updates="None" val="phoda_trials" valType="code"/>
      <Param name="random seed" updates="None" val="" valType="code"/>
    </LoopInitiator>
    <Routine name="phodaDelay"/>
    <Routine name="phodaView"/>
    <LoopTerminator name="phoda_trials"/>
    <LoopInitiator loopType="TrialHandler" name="state_measure_trials">
      <Param name="Selected rows" updates="None" val="0:7" valType="str"/>
      <Param name="conditions" updates="None" val="[OrderedDict([('rating_type', 'Generic'), ('rating_category', 'Fatigue'), ('rating_message', 'Rate your current fatigue level'), ('rating_min_label', 'No fatigue at all'), ('rating_max_label', 'As bad as you can imagine'), ('picture_path', None), ('tick_values', '0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10'), ('granularity', np.int64(1)), ('style', 'rating')]), OrderedDict([('rating_type', 'Generic'), ('rating_category', 'Sleepiness'), ('rating_message', 'Rate your current sleepiness level'), ('rating_min_label', 'Not at all sleepy'), ('rating_max_label', 'As bad as you can imagine'), ('picture_path', None), ('tick_values', '0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10'), ('granularity', np.int64(1)), ('style', 'rating')]), OrderedDict([('rating_type', 'Generic'), ('rating_category', 'Pain'), ('rating_message', 'Rate your current pain level'), ('rating_min_label', 'No pain'), ('rating_max_label', 'Worst possible pain'), ('picture_path', None), ('tick_values', '0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10'), ('granularity', np.int64(1)), ('style', 'rating')]), OrderedDict([('rating_type', 'Generic'), ('rating_category', 'Pain Unpleasantness'), ('rating_message', 'Rate your current pain unpleasantness level'), ('rating_min_label', 'Not at all unpleasant pain'), ('rating_max_label', 'Worst possible unpleasant pain'), ('picture_path', None), ('tick_values', '0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10'), ('granularity', np.int64(1)), ('style', 'rating')]), OrderedDict([('rating_type', 'SAM'), ('rating_category', 'Valence'), ('rating_message', 'Rate how pleasant or unpleasant you feel'), ('rating_min_label', 'Pleasant'), ('rating_max_label', 'Unpleasant'), ('picture_path', '../../shared/pictures/sam-valence.png'), ('tick_values', '1, 2, 3, 4, 5, 6, 7, 8, 9'), ('granularity', np.int64(1)), ('style', 'radio')]), OrderedDict([('rating_type', 'SAM'), ('rating_category', 'Arousal'), ('rating_message', 'Rate how calm or excited you feel'), ('rating_min_label', 'Calm'), ('rating_max_label', 'Excited'), ('picture_path', '../../shared/pictures/sam-arousal.png'), ('tick_values', '1, 2, 3, 4, 5, 6, 7, 8, 9'), ('granularity', np.int64(1)), ('style', 'radio')]), OrderedDict([('rating_type', 'SAM'), ('rating_category', 'Dominance'), ('rating_message', 'Rate how dominated or in control you feel'), ('rating_min_label', 'Dominated'), ('rating_max_label', 'In Control'), ('picture_path', '../../shared/pictures/sam-dominance.png'), ('tick_values', '1, 2, 3, 4, 5, 6, 7, 8, 9'), ('granularity', np.int64(1)), ('style', 'radio')]), OrderedDict([('rating_type', 'Generic'), ('rating_category', 'Emotion Regulation'), ('rating_message', 'Rate how successful you were in doing the emotion regulation tasks'), ('rating_min_label', 'Not at all successful'), ('rating_max_label', 'Completely successful'), ('picture_path', None), ('tick_values', '0, 1, 2, 3, 4, 5, 6, 7'), ('granularity', np.int64(1)), ('style', 'rating')])]" valType="str"/>
      <Param name="conditionsFile" updates="None" val="../../shared/loop-templates/loopStateMeasure.csv" valType="file"/>
      <Param name="endPoints" updates="None" val="[0, 1]" valType="num"/>
      <Param name="isTrials" updates="None" val="True" valType="bool"/>
      <Param name="loopType" updates="None" val="sequential" valType="str"/>
      <Param name="nReps" updates="None" val="1" valType="num"/>
      <Param name="name" updates="None" val="state_measure_trials" valType="code"/>
      <Param name="random seed" updates="None" val="" valType="code"/>
    </LoopInitiator>
    <Routine name="stateMeasure"/>
    <LoopTerminator name="state_measure_trials"/>
    <LoopTerminator name="phoda_mode_loop"/>
    <Routine name="goodbye"/>
  </Flow>
</PsychoPy2experiment>
